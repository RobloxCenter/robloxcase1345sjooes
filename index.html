<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><title>Roblox Drop App</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style>*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}body{font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif;background-color:#0d0d12;color:#fff;margin:0;padding:0;display:flex;flex-direction:column;height:100vh;overflow:hidden}img{border-radius:12px;border:1px solid rgba(255,255,255,.1);object-fit:cover}.header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:rgba(22,22,28,.8);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.05);z-index:10}.user-info{display:flex;align-items:center;gap:12px}.avatar{width:40px;height:40px;background:linear-gradient(135deg,#6c5ce7,#a29bfe);border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;box-shadow:0 4px 10px rgba(108,92,231,.3)}.balance-container{background:rgba(0,184,148,.15);border:1px solid rgba(0,184,148,.4);padding:8px 15px;border-radius:12px;font-weight:800;color:#00b894;font-size:16px;display:flex;align-items:center;gap:5px;box-shadow:0 0 15px rgba(0,184,148,.1)}.content{flex-grow:1;overflow-y:auto;padding:20px;padding-bottom:100px}.section-title{margin:0 0 20px 0;font-size:24px;font-weight:800;background:linear-gradient(90deg,#fff,#8b8b99);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.cases-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.case-card{background:linear-gradient(180deg,#1f1f25 0,#16161a 100%);border-radius:20px;padding:20px 15px;text-align:center;border:1px solid rgba(255,255,255,.08);cursor:pointer;position:relative;overflow:hidden;transition:all .3s ease}.case-card:active{transform:scale(.95)}.case-card-img{height:90px;margin-bottom:15px;display:flex;align-items:center;justify-content:center;font-size:60px;filter:drop-shadow(0 10px 15px rgba(0,0,0,.6))}.case-card-img img{max-width:100%;max-height:100%}.case-card-title{font-size:16px;font-weight:800;margin-bottom:8px}.case-card-price{color:#fdcb6e;font-weight:700;font-size:14px;background:rgba(253,203,110,.15);display:inline-block;padding:6px 12px;border-radius:8px}.btn{background:linear-gradient(135deg,#6c5ce7,#a29bfe);border:none;color:#fff;padding:14px 20px;border-radius:12px;font-weight:700;font-size:16px;cursor:pointer;width:100%;transition:transform .1s;box-shadow:0 4px 15px rgba(108,92,231,.4);display:flex;align-items:center;justify-content:center;gap:8px}.btn:active{transform:scale(.96)}.btn:disabled{opacity:.5;cursor:not-allowed;transform:none}.btn-success{background:linear-gradient(135deg,#00b894,#55efc4);box-shadow:0 4px 15px rgba(0,184,148,.4)}.btn-warning{background:linear-gradient(135deg,#fdcb6e,#ffeaa7);box-shadow:0 4px 15px rgba(253,203,110,.4);color:#2d3436}.btn-primary{background:linear-gradient(135deg,#0984e3,#74b9ff);box-shadow:0 4px 15px rgba(9,132,227,.4)}.btn-outline{background:0 0;border:1px solid rgba(255,255,255,.2);box-shadow:none}.panel{background:#16161a;border-radius:20px;padding:20px;text-align:center;border:1px solid rgba(255,255,255,.05);margin-bottom:20px}.inventory-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.inv-item{background:#1f1f25;border-radius:16px;padding:15px 10px;text-align:center;border:1px solid #2a2a35;position:relative;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.inv-item.selected{border-color:#6c5ce7;background:rgba(108,92,231,.1);transform:translateY(-3px);box-shadow:0 8px 20px rgba(108,92,231,.2)}.inv-item-img{height:50px;margin-bottom:10px;display:flex;align-items:center;justify-content:center;font-size:40px}.inv-item-img img{max-width:100%;max-height:100%}.inv-item-name{font-size:12px;font-weight:700;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:8px}.inv-item-price{font-size:11px;color:#8b8b99;background:rgba(255,255,255,.05);padding:4px 8px;border-radius:6px}.craft-slots{display:flex;justify-content:center;gap:15px;margin:20px 0 25px 0}.craft-slot{width:80px;height:80px;background:#1f1f25;border:2px dashed rgba(255,255,255,.2);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:40px}.craft-slot img{max-width:80%;max-height:80%;border:none}.craft-slot.filled{border-style:solid;border-color:#6c5ce7;background:rgba(108,92,231,.1);box-shadow:0 0 20px rgba(108,92,231,.2);transform:scale(1.05)}.roulette-container{display:none;flex-direction:column;align-items:center;justify-content:center;height:60vh}.roulette-wrapper{width:100%;height:160px;background:#16161a;overflow:hidden;position:relative;border-radius:20px;border:1px solid rgba(255,255,255,.1);box-shadow:inset 0 0 40px rgba(0,0,0,.8),0 10px 30px rgba(0,0,0,.5)}.roulette-items{display:flex;height:100%}.item{min-width:140px;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;border-right:1px solid rgba(255,255,255,.03);font-size:60px}.item img{max-width:80px;max-height:80px;filter:drop-shadow(0 5px 10px rgba(0,0,0,.5));border:none}.item-text{font-size:16px;font-weight:700;text-align:center;padding:0 10px}.selector-line{position:absolute;top:0;bottom:0;left:50%;width:4px;background:#fdcb6e;z-index:10;transform:translateX(-50%);box-shadow:0 0 20px #fdcb6e}.nav{display:flex;justify-content:space-between;background:rgba(22,22,28,.95);backdrop-filter:blur(15px);padding:12px 5px 20px 5px;border-top:1px solid rgba(255,255,255,.05);position:fixed;bottom:0;width:100%;z-index:100}.nav-btn{background:0 0;color:#8b8b99;border:none;font-size:11px;font-weight:600;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:6px;flex:1}.nav-icon{font-size:22px;opacity:.5;filter:grayscale(100%);transition:all .2s}.nav-btn.active{color:#fff}.nav-btn.active .nav-icon{opacity:1;filter:grayscale(0);transform:translateY(-4px) scale(1.1)}.page{display:none;animation:fadeIn .4s ease}.page.active{display:block}.tab-content{display:none}.tab-content.active{display:block}@keyframes scaleUp{from{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.modal-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);backdrop-filter:blur(8px);align-items:center;justify-content:center;z-index:200}.modal-content{background:#16161a;padding:30px 25px;border-radius:28px;text-align:center;border:1px solid rgba(255,255,255,.1);width:90%;max-width:360px;box-shadow:0 25px 50px rgba(0,0,0,.5);max-height:85vh;overflow-y:auto;transform:scale(.95);opacity:0}#resultItemIcon img{max-height:160px;max-width:100%;object-fit:contain}.modal-overlay.show .modal-content{animation:scaleUp .3s cubic-bezier(.175,.885,.32,1.275) forwards}.modal-overlay.show{display:flex;animation:fadeIn .2s ease}.drops-list-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.drop-item-card{background:#1f1f25;border:1px solid rgba(255,255,255,.03);border-radius:12px;padding:10px 5px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:110px}.drop-item-card img{max-width:60px;max-height:60px;margin-bottom:8px}.ref-box{display:flex;align-items:center;background:#1f1f25;border-radius:12px;padding:10px;margin-top:10px;border:1px solid rgba(255,255,255,.1)}.ref-link{flex-grow:1;color:#00b894;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.multi-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;max-height:40vh;overflow-y:auto;margin-bottom:20px;padding-right:5px}.multi-grid img{max-height:40px;max-width:100%;object-fit:contain}@keyframes fadeIn{from{opacity:0}to{opacity:1}}</style></head><body><div class="header"><div class="user-info"><div class="avatar" id="userAvatar">R</div><div><div style="font-weight:800;font-size:15px" id="tgUserName">–ò–≥—Ä–æ–∫</div><div style="font-size:12px;color:#8b8b99" id="tgUserStatus">–ù–æ–≤–∏—á–æ–∫</div></div></div><div class="balance-container"><span id="balanceAmount">0</span> ‚ÇΩ</div></div><div class="content" style="padding-bottom:80px"><div id="page-cases" class="page active"><h2 class="section-title">–ú–∞–≥–∞–∑–∏–Ω</h2><div style="display:flex;gap:10px;margin-bottom:20px"><button class="btn" id="btnTabCases" onclick="switchShopTab('cases')">–ö–µ–π—Å—ã</button> <button class="btn btn-outline" id="btnTabKeys" onclick="switchShopTab('keys')">–ö–ª—é—á–∏</button></div><div class="cases-grid" id="casesGrid"></div><div class="cases-grid" id="keysGrid" style="display:none"></div></div><div id="page-case-view" class="page" style="margin:-20px;padding-bottom:40px"><div style="padding:20px;cursor:pointer;color:#8b8b99;font-weight:700;display:flex;align-items:center;gap:5px;background:rgba(22,22,28,.8);border-bottom:1px solid rgba(255,255,255,.05)" onclick="switchPage('cases',document.querySelectorAll('.nav-btn')[0])"><span style="font-size:18px">‚Üê</span> –ù–∞–∑–∞–¥ –≤ –º–∞–≥–∞–∑–∏–Ω</div><div style="width:100%;padding:30px 20px;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,rgba(108,92,231,.15) 0,transparent 70%)"><img id="viewCaseImg" src="" style="width:200px;height:200px;border-radius:16px;filter:drop-shadow(0 15px 30px rgba(0,0,0,.6));border:2px solid rgba(255,255,255,.1)"></div><div style="padding:0 20px;text-align:center"><p style="color:#8b8b99;font-size:14px;margin-bottom:15px">–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É –∏ –ø–æ–ª—É—á–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã!</p><div id="amountSelector" style="display:flex;justify-content:center;align-items:center;gap:15px;margin-bottom:20px"><button class="btn btn-outline" style="width:40px;height:40px;padding:0;display:flex;align-items:center;justify-content:center;font-size:20px;border-radius:12px" onclick="changeCaseAmount(-1)">-</button> <span id="caseAmount" style="font-size:22px;font-weight:800;width:30px;text-align:center">1</span> <button class="btn btn-outline" style="width:40px;height:40px;padding:0;display:flex;align-items:center;justify-content:center;font-size:20px;border-radius:12px" onclick="changeCaseAmount(1)">+</button> <button class="btn btn-outline" style="width:auto;height:40px;padding:0 12px;font-size:13px" onclick="setCaseAmount(10)">MAX</button></div><button class="btn btn-primary" id="viewCaseBtn" style="padding:16px;font-size:16px" onclick="confirmOpenCase()">–û—Ç–∫—Ä—ã—Ç—å</button></div><h3 style="margin:30px 20px 15px;font-size:18px;color:#fff">–í–æ–∑–º–æ–∂–Ω—ã–π –¥—Ä–æ–ø:</h3><div class="drops-list-grid" id="viewCaseDrops" style="padding:0 20px"></div></div><div id="page-roulette" class="roulette-container page"><h2 id="openingCaseName" style="margin-top:0;margin-bottom:30px;font-size:28px;color:#fff;text-shadow:0 0 20px rgba(108,92,231,.5);text-align:center">–û—Ç–∫—Ä—ã–≤–∞–µ–º...</h2><div class="roulette-wrapper" id="roulette"><div class="selector-line"></div><div class="roulette-items" id="rouletteItems"></div></div></div><div id="page-inventory" class="page"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"><h2 class="section-title" style="margin:0">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2><div style="font-size:14px;color:#8b8b99;background:rgba(255,255,255,.05);padding:5px 12px;border-radius:20px">–í—Å–µ–≥–æ: <span id="invCount" style="color:#fff;font-weight:700">0</span></div></div><div class="inventory-grid" id="inventoryGrid"></div></div><div id="page-games" class="page"><h2 class="section-title">–ò–≥—Ä—ã</h2><div style="display:flex;gap:10px;margin-bottom:20px"><button class="btn" id="btnTabContract" onclick="switchGameTab('contract')">–ö–æ–Ω—Ç—Ä–∞–∫—Ç</button> <button class="btn btn-outline" id="btnTabUpgrade" onclick="switchGameTab('upgrade')">–ê–ø–≥—Ä–µ–π–¥</button></div><div id="tab-contract" class="tab-content active"><div class="panel"><p style="color:#8b8b99;font-size:14px;margin-top:0">–í—ã–±–µ—Ä–∏—Ç–µ 3 –æ–±—ã—á–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–∞. –û–Ω–∏ –∏—Å—á–µ–∑–Ω—É—Ç, –∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 1 —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö)!</p><div class="craft-slots" id="craftSlots"><div class="craft-slot" id="slot-0"></div><div class="craft-slot" id="slot-1"></div><div class="craft-slot" id="slot-2"></div></div><button class="btn btn-success" id="btnCraft" style="opacity:.5;cursor:not-allowed" onclick="executeCraft()">–°–∫—Ä–∞—Ñ—Ç–∏—Ç—å</button></div><h3 style="margin:25px 0 15px 0;font-size:18px;color:#fff">–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:</h3><div class="inventory-grid" id="craftInventoryGrid"></div></div><div id="tab-upgrade" class="tab-content"><div class="panel"><p style="color:#8b8b99;font-size:14px;margin-top:0">–£–ª—É—á—à–∞–π—Ç–µ —Å–≤–æ–∏ –¥–µ—à–µ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –¥–æ—Ä–æ–≥–∏–µ!</p><div style="display:flex;justify-content:space-around;align-items:center;margin:20px 0"><div class="craft-slot" id="upg-my-slot" onclick="openUpgMyModal()" style="cursor:pointer;flex-direction:column;font-size:12px;color:#8b8b99">–í–∞—à<br>–ø—Ä–µ–¥–º–µ—Ç</div><div style="font-size:24px">‚û°Ô∏è</div><div class="craft-slot" id="upg-target-slot" onclick="openUpgTargetModal()" style="cursor:pointer;flex-direction:column;font-size:12px;color:#8b8b99">–ñ–µ–ª–∞–µ–º—ã–π<br>–ø—Ä–µ–¥–º–µ—Ç</div></div><div id="upg-chance" style="margin-bottom:20px;font-weight:700;color:#fdcb6e;font-size:18px">–®–∞–Ω—Å: 0%</div><button class="btn btn-warning" id="btnUpgrade" style="opacity:.5;cursor:not-allowed" onclick="executeUpgrade()">–ê–ø–≥—Ä–µ–π–¥</button></div></div></div><div id="page-bonus" class="page"><h2 class="section-title">–£–¥–∞—á–∞</h2><div class="panel"><div style="font-size:70px;margin-bottom:10px;filter:drop-shadow(0 0 20px rgba(253,203,110,.5))">üé∞</div><h3 style="margin:0 0 10px 0">–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä—É–ª–µ—Ç–∫–∞</h3><p style="color:#8b8b99;font-size:14px;margin-bottom:20px">–ö—Ä—É—Ç–∏ —Ä—É–ª–µ—Ç–∫—É —Ä–∞–∑ –≤ 24 —á–∞—Å–∞! –®–∞–Ω—Å 30% –ø–æ–ª—É—á–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞.</p><button class="btn btn-warning" id="btnBonusSpin" onclick="spinBonusWheel()">–ö—Ä—É—Ç–∏—Ç—å (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)</button></div></div><div id="page-profile" class="page"><h2 class="section-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2><div class="panel" style="text-align:left;padding:20px;border-color:#00b894;box-shadow:0 0 15px rgba(0,184,148,.15);margin-bottom:20px" id="profileRobloxBlock"><h3 style="margin:0 0 10px 0;font-size:16px;color:#55efc4">üéÆ –ü—Ä–∏–≤—è–∑–∫–∞ Roblox</h3><div id="robloxLinkedStatus"><p style="color:#8b8b99;font-size:13px;margin:0 0 15px 0">–ü—Ä–∏–≤—è–∂–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç Roblox, —á—Ç–æ–±—ã –≤—ã–≤–æ–¥–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã. –û—Ç–≤—è–∑–∞—Ç—å –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ!</p><button class="btn btn-success" style="width:100%;padding:12px" onclick="openBindModal()">–ü—Ä–∏–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button></div></div><div class="panel" style="text-align:left;display:flex;justify-content:space-between;padding:20px"><div><p style="color:#8b8b99;font-size:13px;margin:0 0 5px 0">–û—Ç–∫—Ä—ã—Ç–æ –∫–µ–π—Å–æ–≤</p><p id="statOpened" style="font-size:24px;font-weight:700;margin:0;color:#fff">0</p></div><div style="text-align:right"><p style="color:#8b8b99;font-size:13px;margin:0 0 5px 0">–£—Å–ø–µ—à–Ω—ã—Ö –∫—Ä–∞—Ñ—Ç–æ–≤</p><p id="statCrafts" style="font-size:24px;font-weight:700;margin:0;color:#fff">0</p></div></div><button class="btn btn-success" style="margin-bottom:20px;padding:18px" onclick="startTopupProcess()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button><div class="panel" style="text-align:left;padding:20px;border-color:#6c5ce7;box-shadow:0 0 15px rgba(108,92,231,.15)"><h3 style="margin:0 0 10px 0;font-size:16px;color:#a29bfe">üéÅ –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞</h3><div style="display:flex;gap:10px"><input type="text" id="promoInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥" style="flex-grow:1;padding:12px 15px;border-radius:12px;border:1px solid rgba(255,255,255,.2);background:#1f1f25;color:#fff;font-size:16px;outline:0"><button class="btn" style="width:auto;padding:12px 25px" onclick="applyPromo(this)">–û–ö</button></div></div><div class="panel" style="text-align:left;padding:20px"><h3 style="margin:0 0 10px 0;font-size:16px">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π</h3><p style="color:#8b8b99;font-size:13px;margin:0">–ü–æ–ª—É—á–∞–π 10% –æ—Ç –∏—Ö –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π!</p><div class="ref-box"><div class="ref-link" id="refLink">t.me/StockOGCasesBot?start=ref</div><button class="btn btn-outline" style="width:auto;padding:6px 12px;font-size:12px" onclick="copyRefLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div></div></div><div class="nav"><button class="nav-btn active" onclick="switchPage('cases',this)"><div class="nav-icon">üì¶</div><span>–ú–∞–≥–∞–∑–∏–Ω</span></button> <button class="nav-btn" onclick="switchPage('inventory',this)"><div class="nav-icon">üéí</div><span>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span></button> <button class="nav-btn" onclick="switchPage('games',this)"><div class="nav-icon">üéÆ</div><span>–ò–≥—Ä—ã</span></button> <button class="nav-btn" onclick="switchPage('bonus',this)"><div class="nav-icon">üé°</div><span>–£–¥–∞—á–∞</span></button> <button class="nav-btn" onclick="switchPage('profile',this)"><div class="nav-icon">üë§</div><span>–ü—Ä–æ—Ñ–∏–ª—å</span></button></div><div class="modal-overlay" id="bindModal"><div class="modal-content" style="width:90%;max-width:380px"><h2 style="margin-top:0;color:#fff">–ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞</h2><div id="bindStep1"><p style="color:#8b8b99;font-size:14px">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–æ—á–Ω—ã–π –Ω–∏–∫–Ω–µ–π–º –≤ Roblox. –í—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –µ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∂–µ.</p><input type="text" id="bindUsernameInput" placeholder="–ù–∏–∫ –≤ Roblox" style="width:100%;padding:14px;margin:15px 0;border-radius:12px;border:1px solid rgba(255,255,255,.2);background:#1f1f25;color:#fff;font-size:16px;outline:0"><div style="display:flex;gap:10px"><button class="btn btn-outline" style="flex:1" onclick="closeModal('bindModal')">–û—Ç–º–µ–Ω–∞</button> <button class="btn btn-primary" style="flex:1" onclick="goToBindStep2()">–î–∞–ª–µ–µ ‚û°Ô∏è</button></div></div><div id="bindStep2" style="display:none"><p style="color:#8b8b99;font-size:14px">1. –ó–∞–π–¥–∏—Ç–µ –≤ Roblox –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å.</p><p style="color:#8b8b99;font-size:14px">2. –í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª <b>About (–û–ø–∏—Å–∞–Ω–∏–µ)</b> –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ:</p><div style="background:rgba(108,92,231,.15);border:1px dashed #6c5ce7;padding:15px;border-radius:12px;margin:15px 0;font-family:monospace;font-size:18px;color:#a29bfe;font-weight:700;letter-spacing:1px" id="bindPhraseDisplay">–∑–∞–≥—Ä—É–∑–∫–∞...</div><div style="color:#fdcb6e;font-weight:700;font-size:18px;margin-bottom:20px">–û—Å—Ç–∞–ª–æ—Å—å: <span id="bindTimerDisplay">03:00</span></div><button class="btn btn-success" id="btnVerifyRoblox" style="width:100%;margin-bottom:10px" onclick="verifyRobloxAcc()">–Ø —É–∫–∞–∑–∞–ª —Ñ—Ä–∞–∑—É</button> <button class="btn btn-outline" style="width:100%" onclick="closeBindModal()">–û—Ç–º–µ–Ω–∞</button></div></div></div><div class="modal-overlay" id="resultModal"><div class="modal-content"><h2 style="margin-top:0;color:#fff;font-size:26px" id="resultTitle">–û—Ç–ª–∏—á–Ω—ã–π –¥—Ä–æ–ø!</h2><div id="resultItemIcon" style="font-size:90px;margin:25px 0;display:flex;justify-content:center;align-items:center">üó°Ô∏è</div><div id="resultItemName" style="font-weight:800;font-size:22px;margin-bottom:8px;line-height:1.2">–ú–µ—á</div><div id="resultItemInfoBlock" style="color:#8b8b99;font-size:15px;margin-bottom:30px"></div><div style="display:flex;flex-direction:column;gap:12px" id="resultActionsItems"><button class="btn btn-success" onclick="keepItem()">üéí –í –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</button> <button class="btn btn-outline" onclick="sellFromModal()">üí∞ –ü—Ä–æ–¥–∞—Ç—å –∑–∞ <span id="sellModalPrice">0</span> ‚ÇΩ</button></div><div style="display:flex;flex-direction:column;gap:12px;display:none" id="resultActionsMoney"><button class="btn btn-success" onclick="takeMoney()">üí∞ –ó–∞–±—Ä–∞—Ç—å –¥–µ–Ω—å–≥–∏ –Ω–∞ –±–∞–ª–∞–Ω—Å</button></div><div style="display:flex;flex-direction:column;gap:12px;display:none" id="resultActionsPromo"></div></div></div><div class="modal-overlay" id="multiResultModal"><div class="modal-content" style="width:95%;max-width:400px;padding:25px 15px"><h2 style="margin-top:0;color:#fff;font-size:22px">–î—Ä–æ–ø —Å <span id="multiCaseCount" style="color:#a29bfe">5</span> –∫–µ–π—Å–æ–≤</h2><div class="multi-grid" id="multiResultGrid"></div><div style="font-size:14px;color:#8b8b99;margin-bottom:15px">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="multiTotalValue" style="color:#fdcb6e;font-weight:700">0 ‚ÇΩ</span></div><div style="display:flex;flex-direction:column;gap:10px"><button class="btn btn-success" onclick="keepMultiItems()">üéí –ó–∞–±—Ä–∞—Ç—å –≤—Å—ë –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</button> <button class="btn btn-outline" onclick="sellMultiItems()">üí∞ –ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë</button></div></div></div><div class="modal-overlay" id="withdrawModal"><div class="modal-content"><h2 style="margin-top:0;color:#fff">–ó–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥</h2><p style="color:#8b8b99;font-size:14px">–ü—Ä–µ–¥–º–µ—Ç: <strong id="wdItemName" style="color:#fff"></strong></p><p style="color:#8b8b99;font-size:14px;margin-bottom:20px">–ê–∫–∫–∞—É–Ω—Ç: <strong id="wdTargetAcc" style="color:#00b894"></strong></p><div style="display:flex;flex-direction:column;gap:10px"><button class="btn btn-success" id="wdSubmitBtn" onclick="confirmWithdraw()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–≤–æ–¥</button> <button class="btn btn-outline" onclick="closeModal('withdrawModal')">–û—Ç–º–µ–Ω–∞</button></div></div></div><div class="modal-overlay" id="upgMyModal"><div class="modal-content"><h2 style="margin-top:0;color:#fff">–í–∞—à–∏ –ø—Ä–µ–¥–º–µ—Ç—ã</h2><div class="inventory-grid" id="upgMyGrid"></div><button class="btn btn-outline" style="margin-top:15px" onclick="closeModal('upgMyModal')">–û—Ç–º–µ–Ω–∞</button></div></div><div class="modal-overlay" id="upgTargetModal"><div class="modal-content"><h2 style="margin-top:0;color:#fff">–í—ã–±–æ—Ä —Ü–µ–ª–∏</h2><div class="inventory-grid" id="upgTargetGrid"></div><button class="btn btn-outline" style="margin-top:15px" onclick="closeModal('upgTargetModal')">–û—Ç–º–µ–Ω–∞</button></div></div><script>document.addEventListener('contextmenu',e=>e.preventDefault());document.addEventListener('keydown',e=>{if(e.key==='F12'||(e.ctrlKey&&e.shiftKey&&(e.key==='I'||e.key==='J'||e.key==='C'))||(e.ctrlKey&&e.key==='U'))e.preventDefault()});setInterval(function(){(function(){return false;}['constructor']('debugger')['call']());},50);let tg=window.Telegram.WebApp;tg.expand();const db={save:function(e,t){localStorage.setItem(e,t);if(tg.CloudStorage){tg.CloudStorage.setItem(e,t);}},load:function(e){return new Promise((t)=>{let n=localStorage.getItem(e);if(tg.CloudStorage){tg.CloudStorage.getItem(e,(a,o)=>{if(a||!o||o==='undefined'){t(n);}else{localStorage.setItem(e,o);t(o);}});}else t(n);});}};let balance=0;let stats={opened:0,crafts:0};let inventory=[];let isOpening=false;let currentPreviewCase=null;let lastWonItem=null;let multiWonItems=[];let openAmount=1;let craftSelectedIds=[];let upgMyItem=null;let upgTargetItem=null;let isBonusMode=false;let isStandardCase=false;let currentWithdrawItemId=null;let userName="–ò–≥—Ä–æ–∫";let linkedRobloxAcc=null;let bindTargetUsername="";let currentBindPhrase="";let bindTimerInt=null;let bindTimeLeft=180;const bindWords=['tree','auto','car','boom','cat','dog','sun','moon','star','fire','water','box','house','road','sky'];const genericSecretItem={id:'secret',type:'item',icon:'‚ùì',image:'',name:'–°–µ–∫—Ä–µ—Ç–Ω—ã–π –¥—Ä–æ–ø',color:'#ffea00',price:0,isSecret:true};const allItems={'lux_jean':{id:'lux_jean',type:'item',name:'–î–∂–∏–Ω—Å–æ–≤–∫–∞ –õ—É–∏–í–∏—Ç–æ–Ω',color:'#eb4b4b',image:'https://i.postimg.cc/GtKWBQMT/IMAGE-2026-02-27-11-16-28.jpg',price:1250000,weight:5},'lux_puff':{id:'lux_puff',type:'item',name:'–ß–µ—Ä–Ω—ã–π –ü—É—Ö–æ–≤–∏–∫ –õ—É–∏–í–∏—Ç–æ–Ω',color:'#eb4b4b',image:'https://i.postimg.cc/MGwm4SZw/IMAGE-2026-02-27-11-18-58.jpg',price:1250000,weight:5},'lux_rab':{id:'lux_rab',type:'item',name:'–î–∂–∏–Ω—Å–æ–≤–∫–∞ –ö—Ä–æ–ª–∏–∫ –õ—É–∏–í–∏—Ç–æ–Ω',color:'#eb4b4b',image:'https://i.postimg.cc/bJ7xxcBT/IMAGE-2026-02-27-11-22-09.jpg',price:1300000,weight:5},'lux_rolex':{id:'lux_rolex',type:'item',name:'–ß–µ—Ä–Ω—ã–µ –†–æ–ª–µ–∫—Å—ã',color:'#ffea00',image:'https://i.postimg.cc/XqGX5ynq/IMAGE-2026-02-28-15-53-56.jpg',price:1500000,weight:0.0001,isSecret:true},'lux_balen':{id:'lux_balen',type:'item',name:'–ë–µ–ª—ã–µ –û—á–∫–∏ –ë–∞–ª–µ–Ω—Å–∏–∞–≥–∞ "–ë—Ä–æ–≤—å"',color:'#ffea00',image:'https://i.postimg.cc/RCyRqkBG/IMAGE-2026-02-28-15-55-03.jpg',price:8000000,weight:0.00001,isSecret:true},'lux_r1':{id:'lux_r1',type:'item',name:'–ë–∏–∑–Ω–µ—Å –ö–æ—Å—Ç—é–º –ü–µ—Ä—Ñ–µ–∫—Ç–æ',color:'#eb4b4b',image:'https://i.postimg.cc/Z0kdd8C9/IMAGE-2026-02-27-11-20-22.jpg',price:300000,weight:10},'lux_r2':{id:'lux_r2',type:'item',name:'–î–µ–ª–æ–≤–æ–π –ö–æ—Å—Ç—é–º',color:'#eb4b4b',image:'https://i.postimg.cc/zXjhBgqr/IMAGE-2026-02-27-11-23-40.jpg',price:300000,weight:10},'lux_b1':{id:'lux_b1',type:'item',name:'–ó–∞—Å—Ç. –•—É–¥–∏ –ú–µ–ª–ª—Å—Ç—Ä–æ—è',color:'#54a0ff',image:'https://i.postimg.cc/0y4bMGFg/IMAGE-2026-02-27-11-25-00.jpg',price:150000,weight:35},'lux_b2':{id:'lux_b2',type:'item',name:'–†–∞—Å—Å—Ç. –•—É–¥–∏ –ú–µ–ª–ª—Å—Ç—Ä–æ—è',color:'#54a0ff',image:'https://i.postimg.cc/5N7tTqx2/IMAGE-2026-02-27-11-25-37.jpg',price:150000,weight:30},'lux_b3':{id:'lux_b3',type:'item',name:'–ß–µ—Ä–Ω—ã–µ –®—Ç–∞–Ω—ã –ì—É—á—á–∏',color:'#54a0ff',image:'https://i.postimg.cc/XNZ3XS34/IMAGE-2026-02-27-11-29-30.jpg',price:100000,weight:30},'lux_b4':{id:'lux_b4',type:'item',name:'–ë–µ–ª—ã–µ –®—Ç–∞–Ω—ã –ì—É—á—á–∏',color:'#54a0ff',image:'https://i.postimg.cc/4NkCdYB2/IMAGE-2026-02-27-11-30-19.jpg',price:100000,weight:30},'lux_b5':{id:'lux_b5',type:'item',name:'–°–µ—Ä—ã–µ –®—Ç–∞–Ω—ã –ì—É—á—á–∏',color:'#54a0ff',image:'https://i.postimg.cc/ZKhgm15j/IMAGE-2026-02-27-11-30-59.jpg',price:100000,weight:30},'lux_b6':{id:'lux_b6',type:'item',name:'–°–∏–Ω–µ–µ —Ö—É–¥–∏ –õ—É–∏–í–∏—Ç–æ–Ω',color:'#54a0ff',image:'https://i.postimg.cc/jS3ZD9R0/IMAGE-2026-02-27-11-32-01.jpg',price:50000,weight:40},'lux_b7':{id:'lux_b7',type:'item',name:'–¢–∏–≥—Ä–æ–≤–æ–µ —Ö—É–¥–∏ –ì—É—á—á–∏',color:'#54a0ff',image:'https://i.postimg.cc/25BFVSH5/IMAGE-2026-02-27-11-32-46.jpg',price:80000,weight:40},'lux_b8':{id:'lux_b8',type:'item',name:'–ë–µ–ª–æ–µ –•—É–¥–∏ –õ—É–∏–í–∏—Ç–æ–Ω',color:'#54a0ff',image:'https://i.postimg.cc/Ssf9M2cf/IMAGE-2026-02-27-11-33-46.jpg',price:60000,weight:45},'m1':{id:'m1',type:'money',name:'1 000 000 ‚ÇΩ',color:'#ffea00',price:1000000,weight:1,isSecret:true},'m2':{id:'m2',type:'money',name:'100 000 ‚ÇΩ',color:'#ff4757',price:100000,weight:5},'m3':{id:'m3',type:'money',name:'50 000 ‚ÇΩ',color:'#54a0ff',price:50000,weight:15},'m4':{id:'m4',type:'money',name:'30 000 ‚ÇΩ',color:'#b0c3d9',price:30000,weight:25},'m5':{id:'m5',type:'money',name:'25 000 ‚ÇΩ',color:'#b0c3d9',price:25000,weight:35},'m6':{id:'m6',type:'money',name:'15 000 ‚ÇΩ',color:'#b0c3d9',price:15000,weight:50},'m7':{id:'m7',type:'money',name:'5 000 ‚ÇΩ',color:'#b0c3d9',price:5000,weight:65},'agent_vatar':{id:'agent_vatar',type:'agent',name:'–ê–≥–µ–Ω—Ç Vatar',color:'#ffea00',image:'https://i.postimg.cc/G3sVmJD2/IMAGE-2026-02-28-17-09-30.jpg',price:0,weight:0.001,isSecret:true,buffs:'–ë–∏–∑–Ω–µ—Å–º–µ–Ω: +3% –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞.\n–ë–∞—Ä—ã–≥–∞: –°–∫–∏–¥–∫–∞ 5% –Ω–∞ –≤—Å–µ –∫–µ–π—Å—ã.'},'agent_zixxto':{id:'agent_zixxto',type:'agent',name:'–ê–≥–µ–Ω—Ç Zixxto',color:'#ffea00',image:'https://i.postimg.cc/y85rKDNv/IMAGE-2026-02-28-17-19-34.jpg',price:0,weight:0.001,isSecret:true,buffs:'–ë–∏–∑–Ω–µ—Å–º–µ–Ω: +3% –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞.\n–•–∞–∫–µ—Ä: –ü–æ–≤—ã—à–∞–µ—Ç —à–∞–Ω—Å –Ω–∞ –¥–æ—Ä–æ–≥–æ–π –¥—Ä–æ–ø.'},'agent_perfecto':{id:'agent_perfecto',type:'agent',name:'–ê–≥–µ–Ω—Ç Perfecto',color:'#ffea00',image:'https://i.postimg.cc/XJN1Wm5n/IMAGE-2026-02-28-17-34-14.jpg',price:0,weight:0.001,isSecret:true,buffs:'–ü—Ä–æ–¥–∞–≤–µ—Ü: +10% –∫ –±–∞–ª–∞–Ω—Å—É –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ.\n–£–¥–∞—á–∞: –£–ª—É—á—à–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.'},'agent_vovan':{id:'agent_vovan',type:'agent',name:'–ê–≥–µ–Ω—Ç Vovan',color:'#ffea00',icon:'üïµÔ∏è‚Äç‚ôÇÔ∏è',image:'',price:0,weight:0.001,isSecret:true,buffs:'–õ—É–¥–æ–º–∞–Ω: +6% —à–∞–Ω—Å –≤ –ê–ø–≥—Ä–µ–π–¥–µ –∏ –ö–æ–Ω—Ç—Ä–∞–∫—Ç–µ.'},'agent_cheba':{id:'agent_cheba',type:'agent',name:'–ê–≥–µ–Ω—Ç –ß–µ–±–∞',color:'#eb4b4b',image:'https://i.postimg.cc/YC5f8VRV/IMAGE-2026-02-28-17-53-28.jpg',price:0,weight:0.1,buffs:'–£–¥–∞—á–∞: +5% —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å –≤ –ê–ø–≥—Ä–µ–π–¥–µ.'},'agent_funky':{id:'agent_funky',type:'agent',name:'–ê–≥–µ–Ω—Ç Funky',color:'#eb4b4b',image:'https://i.postimg.cc/6pfnL37j/IMAGE-2026-02-28-17-59-22.jpg',price:0,weight:0.1,buffs:'–°—Ç—Ä–æ–∏—Ç–µ–ª—å: +5% —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å –≤ –ê–ø–≥—Ä–µ–π–¥–µ.'},'agent_pechen':{id:'agent_pechen',type:'agent',name:'–ê–≥–µ–Ω—Ç Pechen',color:'#eb4b4b',image:'https://i.postimg.cc/D0SPxTVm/IMAGE-2026-02-28-18-11-59.jpg',price:0,weight:35,buffs:'–£–¥–∞—á–∞: +5% —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å –≤ –ê–ø–≥—Ä–µ–π–¥–µ.'},'agent_150k':{id:'agent_150k',type:'money',name:'–ö—ç—à–±—ç–∫ 150 000 ‚ÇΩ',color:'#b0c3d9',price:150000,weight:64.796}};const casesData=[{id:'money_case',name:'–î–µ–Ω–µ–∂–Ω—ã–π –ö–µ–π—Å',image:'https://i.postimg.cc/CLCgq1VJ/2026-02-27-09-01-01.jpg',price:30000,drops:['m1','m2','m3','m4','m5','m6','m7']},{id:'lux_case',name:'–ö–µ–π—Å –õ—é–∫—Å',image:'https://i.postimg.cc/3NjKtmt7/IMAGE-2026-02-27-11-14-36.jpg',price:150000,drops:['lux_jean','lux_puff','lux_rab','lux_r1','lux_r2','lux_b1','lux_b2','lux_b3','lux_b4','lux_b5','lux_b6','lux_b7','lux_b8','lux_rolex','lux_balen']},{id:'agent_case',name:'–î–æ—Å—å–µ –ê–≥–µ–Ω—Ç–æ–≤',image:'https://i.postimg.cc/fbjWQ4sR/IMAGE_2026_02_28_10_06_11.jpg',price:1000000,drops:['agent_vatar','agent_zixxto','agent_perfecto','agent_vovan','agent_cheba','agent_funky','agent_pechen','agent_150k']}];const keysData=[];function updateProfileUI(){const e=document.getElementById('robloxLinkedStatus');if(linkedRobloxAcc){e.innerHTML=`<div style="background: rgba(0, 184, 148, 0.1); border: 1px solid rgba(0, 184, 148, 0.3); padding: 12px; border-radius: 12px; display: flex; align-items: center; justify-content: space-between;"><div style="font-weight: bold; color: white;">‚úÖ ${linkedRobloxAcc}</div><div style="font-size: 11px; color: #00b894; background: rgba(0, 184, 148, 0.2); padding: 4px 8px; border-radius: 6px;">–ü—Ä–∏–≤—è–∑–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞</div></div>`;}}function openBindModal(){document.getElementById('bindUsernameInput').value='';document.getElementById('bindStep1').style.display='block';document.getElementById('bindStep2').style.display='none';openModal('bindModal');}function closeBindModal(){clearInterval(bindTimerInt);closeModal('bindModal');}function goToBindStep2(){let e=document.getElementById('bindUsernameInput').value.trim();if(!/^[a-zA-Z0-9_]{3,20}$/.test(e)){alert('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–∏–∫ Roblox!');return;}bindTargetUsername=e;let t=bindWords[Math.floor(Math.random()*bindWords.length)];let n=bindWords[Math.floor(Math.random()*bindWords.length)];let a=bindWords[Math.floor(Math.random()*bindWords.length)];let o=bindWords[Math.floor(Math.random()*bindWords.length)];currentBindPhrase=`${t}-${n}-${a}-${o}`;document.getElementById('bindPhraseDisplay').innerText=currentBindPhrase;document.getElementById('bindStep1').style.display='none';document.getElementById('bindStep2').style.display='block';bindTimeLeft=180;updateBindTimer();clearInterval(bindTimerInt);bindTimerInt=setInterval(()=>{bindTimeLeft--;updateBindTimer();if(bindTimeLeft<=0){clearInterval(bindTimerInt);alert('–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ù–∞—á–Ω–∏—Ç–µ –ø—Ä–∏–≤—è–∑–∫—É –∑–∞–Ω–æ–≤–æ.');closeBindModal();}},1000);}function updateBindTimer(){let e=Math.floor(bindTimeLeft/60);let t=bindTimeLeft%60;document.getElementById('bindTimerDisplay').innerText=`0${e}:${t<10?'0'+t:t}`;}async function verifyRobloxAcc(){const e=document.getElementById('btnVerifyRoblox');e.disabled=true;e.innerText='–ü—Ä–æ–≤–µ—Ä–∫–∞... (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-20 —Å–µ–∫)';try{let t=await fetch('https://corsproxy.io/?https://users.roblox.com/v1/usernames/users',{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({usernames:[bindTargetUsername],excludeBannedUsers:true})});if(!t.ok)throw new Error('Proxy error 1');let n=await t.json();if(!n.data||n.data.length===0){alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –Ω–∏–∫–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ Roblox!');e.disabled=false;e.innerText='–Ø —É–∫–∞–∑–∞–ª —Ñ—Ä–∞–∑—É';return;}let a=n.data[0].id;let o=await fetch(`https://corsproxy.io/?https://users.roblox.com/v1/users/${a}`);if(!o.ok)throw new Error('Proxy error 2');let s=await o.json();let r=s.description||"";if(r.includes(currentBindPhrase)){linkedRobloxAcc=bindTargetUsername;db.save('roblox_linked_acc',linkedRobloxAcc);alert('‚úÖ –ê–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω!');closeBindModal();updateProfileUI();}else{alert('‚ùå –§—Ä–∞–∑–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ Roblox, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –µ—â–µ —Ä–∞–∑.');e.disabled=false;e.innerText='–Ø —É–∫–∞–∑–∞–ª —Ñ—Ä–∞–∑—É';}}catch(t){alert('–°–±–æ–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Roblox. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');e.disabled=false;e.innerText='–Ø —É–∫–∞–∑–∞–ª —Ñ—Ä–∞–∑—É';}}function hasAgent(e){return inventory.some(t=>t.id===e);}function getAnyAgent(){return inventory.find(e=>e.type==='agent');}function getCasePrice(e){let t=e.price;if(hasAgent('agent_vatar'))t=Math.floor(t*0.95);return t;}function updateAgentStatus(){let e=getAnyAgent();if(e){document.getElementById('tgUserStatus').innerText=e.name;document.getElementById('tgUserStatus').style.color=e.color;}else{document.getElementById('tgUserStatus').innerText='–ù–æ–≤–∏—á–æ–∫';document.getElementById('tgUserStatus').style.color='#8b8b99';}}function fireAgent(e,t){if(confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–≤–æ–ª–∏—Ç—å ${t}? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å, –∏ –∞–≥–µ–Ω—Ç –∏—Å—á–µ–∑–Ω–µ—Ç –Ω–∞–≤—Å–µ–≥–¥–∞.`)){inventory=inventory.filter(t=>String(t.invId)!==String(e));saveInventory();renderInventory();updateAgentStatus();alert(`${t} —É—Å–ø–µ—à–Ω–æ —É–≤–æ–ª–µ–Ω!`);}}function saveInventory(){db.save('roblox_inv',JSON.stringify(inventory.map(e=>({id:e.id,invId:String(e.invId),price:e.price}))));}function saveStats(){db.save('roblox_stats',JSON.stringify(stats));}function updateBalanceUI(){document.getElementById('balanceAmount').innerText=balance.toLocaleString('ru-RU');db.save('roblox_balance',balance.toString());}function getWeightedRandomItem(e,t=false){let n=e;if(t&&Math.random()<0.2){n=e.map(e=>{let t=e.weight||1;if(e.isSecret||e.color==='#eb4b4b')t*=5;return{...e,weight:t};});}let a=n.reduce((e,t)=>e+(t.weight||1),0);let o=Math.random()*a;for(let a=0;a<n.length;a++){if(o<(n[a].weight||1))return e[a];o-=n[a].weight||1;}return e[0];}function renderItemIcon(e,t=false){if(!e)return'?';if(e.isSecret&&e.image&&e.id!=='secret'){if(t)return`<div style="font-size:40px; color:${e.color||'#ffea00'}; filter: drop-shadow(0 0 10px ${e.color||'#ffea00'})">‚ùì</div>`;return`<img src="${e.image}" alt="Secret" style="border-radius:12px; border: 2px solid ${e.color||'#ffea00'}; box-shadow: 0 0 15px ${e.color||'#ffea00'};">`;}if(t&&e.isSecret)return`<div style="font-size:40px; color:${e.color||'#ffea00'}; filter: drop-shadow(0 0 10px ${e.color||'#ffea00'})">‚ùì</div>`;if(e.type==='money'&&t)return`<div style="font-size: 16px; font-weight: 800; color:${e.color}">${(e.price||0).toLocaleString('ru-RU')} ‚ÇΩ</div>`;if(e.image&&e.image!=='')return`<img src="${e.image}" alt="${e.name}">`;if(e.icon)return`<div style="font-size:40px;">${e.icon}</div>`;if(e.type==='money')return`<div style="font-size:30px;">üíµ</div>`;return'?';}window.onload=async()=>{let e="–ò";if(tg.initDataUnsafe&&tg.initDataUnsafe.user){let t=tg.initDataUnsafe.user;if(t.username)userName="@"+t.username;else userName=t.first_name||t.id.toString();e=userName.replace('@','').charAt(0).toUpperCase();}let t=await db.load('roblox_linked_acc');if(t&&t!=='null'){linkedRobloxAcc=t;}updateProfileUI();let n=await db.load('roblox_balance');balance=n!==null?parseInt(n):1500;const a=await db.load('roblox_inv');if(a){inventory=JSON.parse(a).map(e=>{let t=allItems[e.id];if(t)return{...t,invId:String(e.invId),price:e.price||t.price||0};return null;}).filter(e=>e!==null);}const o=await db.load('roblox_stats');if(o){stats=JSON.parse(o);document.getElementById('statOpened').innerText=stats.opened||0;document.getElementById('statCrafts').innerText=stats.crafts||0;}let s=await db.load('pending_claim');if(s&&s!=='null'){try{let e=JSON.parse(s);if(e.type==='money'){balance+=e.price||0;tg.showAlert(`–í—ã –ø–æ–∫–∏–Ω—É–ª–∏ –∏–≥—Ä—É –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è! –í–∞—à –≤—ã–∏–≥—Ä—ã—à (${e.name}) –±—ã–ª –∑–∞—á–∏—Å–ª–µ–Ω –Ω–∞ –±–∞–ª–∞–Ω—Å.`);}else if(e.type==='item'||e.type==='agent'){inventory.push({...e,invId:String(Date.now()+Math.random())});saveInventory();tg.showAlert(`–í—ã –ø–æ–∫–∏–Ω—É–ª–∏ –∏–≥—Ä—É –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è! –ü—Ä–µ–¥–º–µ—Ç "${e.name}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.`);}else if(e.type==='fail'){tg.showAlert(`–í—ã –ø–æ–∫–∏–Ω—É–ª–∏ –∏–≥—Ä—É –≤–æ –≤—Ä–µ–º—è –ê–ø–≥—Ä–µ–π–¥–∞! –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —à–∞–Ω—Å –Ω–µ —Å—ã–≥—Ä–∞–ª –∏ –≤–∞—à –ø—Ä–µ–¥–º–µ—Ç —Å–≥–æ—Ä–µ–ª.`);}db.save('pending_claim','null');}catch(e){db.save('pending_claim','null');}}let r=await db.load('pending_claim_multi');if(r&&r!=='null'){try{let e=JSON.parse(r);let t=0;let n=0;e.forEach(e=>{if(e.type==='money')t+=e.price;else if(e.type!=='promo'){inventory.push({...e,invId:String(Date.now()+Math.random())});n++;}});balance+=t;saveInventory();tg.showAlert(`–í—ã –ø–æ–∫–∏–Ω—É–ª–∏ –∏–≥—Ä—É –≤–æ –≤—Ä–µ–º—è –º—É–ª—å—Ç–∏-–æ—Ç–∫—Ä—ã—Ç–∏—è! –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: ${n} –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ ${t.toLocaleString('ru-RU')} ‚ÇΩ.`);db.save('pending_claim_multi','null');}catch(e){db.save('pending_claim_multi','null');}}const l=new URLSearchParams(window.location.search);let i=l.get('topup_amount');let d=l.get('topup_id');if(i&&d){let e=await db.load('processed_topups');let t=e?JSON.parse(e):[];if(!t.includes(d)){let e=parseInt(i);if(hasAgent('agent_vatar')||hasAgent('agent_zixxto')){let t=Math.floor(e*0.03);e+=t;tg.showAlert(`–ë–æ–Ω—É—Å –æ—Ç –ê–≥–µ–Ω—Ç–∞! –í–∞–º –∑–∞—á–∏—Å–ª–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ +${t.toLocaleString('ru-RU')} ‚ÇΩ (–ò—Ç–æ–≥–æ: ${e.toLocaleString('ru-RU')} ‚ÇΩ)`);}else{tg.showAlert(`‚úÖ –í–∞—à –±–∞–ª–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${e.toLocaleString('ru-RU')} ‚ÇΩ!`);}balance+=e;t.push(d);db.save('processed_topups',JSON.stringify(t));}const n=new URL(window.location);n.searchParams.delete('topup_amount');n.searchParams.delete('topup_id');window.history.replaceState({},document.title,n);}let c=l.get('ungive_amount');let p=l.get('ungive_id');if(c&&p){let e=await db.load('processed_ungives');let t=e?JSON.parse(e):[];if(!t.includes(p)){let e=parseInt(c);balance-=e;if(balance<0)balance=0;t.push(p);db.save('processed_ungives',JSON.stringify(t));tg.showAlert(`‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–ø–∏—Å–∞–ª —Å –≤–∞—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ ${e.toLocaleString('ru-RU')} ‚ÇΩ.\n–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: ${balance.toLocaleString('ru-RU')} ‚ÇΩ`);}const n=new URL(window.location);n.searchParams.delete('ungive_amount');n.searchParams.delete('ungive_id');window.history.replaceState({},document.title,n);}document.getElementById('tgUserName').innerText=userName;document.getElementById('userAvatar').innerText=e;document.getElementById('refLink').innerText=`t.me/StockOGCasesBot?start=ref${tg.initDataUnsafe?.user?.id||'123'}`;updateAgentStatus();let m=l.get('return_item');let u=l.get('t');if(m&&u){let e=await db.load('processed_returns');let t=e?JSON.parse(e):[];if(!t.includes(u)){let e=allItems[m];if(e){inventory.push({...e,invId:String(Date.now()+Math.random()),price:e.price});saveInventory();t.push(u);db.save('processed_returns',JSON.stringify(t));tg.showAlert(`–ü—Ä–µ–¥–º–µ—Ç "${e.name}" —É—Å–ø–µ—à–Ω–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å!`);}}const n=new URL(window.location);n.searchParams.delete('return_item');n.searchParams.delete('t');window.history.replaceState({},document.title,n);}renderCases();renderKeys();updateBalanceUI();updateBonusButton();};function startTopupProcess(){alert('–î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∑–∞–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –æ–∫–Ω–æ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å" –≤ –º–µ–Ω—é –±–æ—Ç–∞!');tg.close();}function switchPage(e,t){if(isOpening)return;document.querySelectorAll('.page').forEach(e=>e.classList.remove('active'));document.getElementById('page-'+e).classList.add('active');if(t){document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active'));t.classList.add('active');}if(e==='inventory')renderInventory();if(e==='games'){renderCraftInventory();updateUpgUI();}if(e==='bonus')updateBonusButton();}function switchShopTab(e){document.getElementById('casesGrid').style.display=e==='cases'?'grid':'none';document.getElementById('keysGrid').style.display=e==='keys'?'grid':'none';document.getElementById('btnTabCases').classList.replace(e==='cases'?'btn-outline':'btn',e==='cases'?'btn':'btn-outline');document.getElementById('btnTabKeys').classList.replace(e==='keys'?'btn-outline':'btn',e==='keys'?'btn':'btn-outline');}function switchGameTab(e){if(isOpening)return;document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active'));document.getElementById('tab-'+e).classList.add('active');document.getElementById('btnTabContract').classList.replace('btn','btn-outline');document.getElementById('btnTabUpgrade').classList.replace('btn','btn-outline');if(e==='contract'){document.getElementById('btnTabContract').classList.replace('btn-outline','btn');renderCraftInventory();}else if(e==='upgrade'){document.getElementById('btnTabUpgrade').classList.replace('btn-outline','btn');updateUpgUI();}}async function updateBonusButton(){const e=document.getElementById('btnBonusSpin');if(!e)return false;const t=await db.load('lastBonusSpin');if(t){const n=Date.now()-parseInt(t);if(n<86400000){e.style.opacity='0.5';e.style.cursor='not-allowed';e.innerText='–î–æ—Å—Ç—É–ø–Ω–æ –∑–∞–≤—Ç—Ä–∞';return false;}}e.style.opacity='1';e.style.cursor='pointer';e.innerText='–ö—Ä—É—Ç–∏—Ç—å (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)';return true;}function spinBonusWheel(){if(isOpening)return;const e=document.getElementById('btnBonusSpin');if(e.innerText==='–î–æ—Å—Ç—É–ø–Ω–æ –∑–∞–≤—Ç—Ä–∞')return;isOpening=true;isBonusMode=true;isStandardCase=false;document.getElementById('page-bonus').classList.remove('active');document.getElementById('page-roulette').classList.add('active');document.getElementById('openingCaseName').innerText="–ö–æ–ª–µ—Å–æ —É–¥–∞—á–∏...";const t=document.getElementById('rouletteItems');t.innerHTML='';const n=Math.random()*100;if(n<=30)lastWonItem={type:'promo',icon:'üéüÔ∏è',name:'–ü—Ä–æ–º–æ–∫–æ–¥ +5%',color:'#0984e3'};else lastWonItem={type:'nothing',icon:'üí®',name:'–ú–∏–º–æ',color:'#8b8b99'};const a=[{type:'promo',icon:'üéüÔ∏è',name:'–ü—Ä–æ–º–æ–∫–æ–¥ +5%',color:'#0984e3'},{type:'nothing',icon:'üí®',name:'–ú–∏–º–æ',color:'#8b8b99'},{type:'nothing',icon:'üí©',name:'–ù–∏—á–µ–≥–æ',color:'#8b8b99'}];initRoulette(a);db.save('lastBonusSpin',Date.now().toString());runRouletteAnimation(lastWonItem,()=>{if(lastWonItem.type==='promo')showResultModal('–£–¥–∞—á–∞ –Ω–∞ –≤–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ!');else showResultModal('–ù–µ –ø–æ–≤–µ–∑–ª–æ...');});}function renderCases(){const e=document.getElementById('casesGrid');e.innerHTML='';casesData.forEach(t=>{let n=getCasePrice(t);const a=t.image?`<img src="${t.image}" style="width:100%; height:100%;">`:`<div style="font-size:60px;">${t.icon}</div>`;let o=`<div class="case-card-price">${n.toLocaleString('ru-RU')} ‚ÇΩ</div>`;if(n<t.price)o=`<div class="case-card-price" style="background:rgba(0,184,148,0.15); color:#00b894;"><del style="color:#8b8b99; font-size:11px;">${t.price}</del> ${n.toLocaleString('ru-RU')} ‚ÇΩ</div>`;e.innerHTML+=`<div class="case-card" onclick="openCasePreview('${t.id}')"><div class="case-card-img">${a}</div><div class="case-card-title">${t.name}</div>${o}</div>`;});}function renderKeys(){const e=document.getElementById('keysGrid');e.innerHTML='';if(keysData.length===0){e.innerHTML='<div style="grid-column: 1 / -1; text-align: center; color: #8b8b99; padding: 20px 0;">–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –∫–ª—é—á–µ–π –≤ –ø—Ä–æ–¥–∞–∂–µ.</div>';return;}keysData.forEach(t=>{e.innerHTML+=`<div class="case-card"><div class="case-card-img"><img src="${t.image}" style="width:100%; height:100%;"></div><div class="case-card-title">${t.name}</div><div class="case-card-price">${t.price.toLocaleString('ru-RU')} ‚ÇΩ</div><button class="btn btn-warning" style="margin-top: 10px; padding: 8px;" onclick="buyKey('${t.id}', this)">–ö—É–ø–∏—Ç—å</button></div>`;});}function buyKey(e,t){if(t.disabled)return;const n=allItems[e];if(balance<n.price){alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∫–ª—é—á–∞!');return;}if(confirm(`–ö—É–ø–∏—Ç—å ${n.name} –∑–∞ ${n.price.toLocaleString('ru-RU')} ‚ÇΩ?`)){t.disabled=true;let a=t.innerText;t.innerText='–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';balance-=n.price;updateBalanceUI();inventory.push({...n,invId:String(Date.now()+Math.random())});saveInventory();setTimeout(()=>{t.disabled=false;t.innerText=a;},600);}}function openModal(e){const t=document.getElementById(e);t.style.display='flex';setTimeout(()=>t.classList.add('show'),10);}function closeModal(e){const t=document.getElementById(e);t.classList.remove('show');setTimeout(()=>t.style.display='none',300);}function changeCaseAmount(e){openAmount+=e;if(openAmount<1)openAmount=1;if(openAmount>10)openAmount=10;document.getElementById('caseAmount').innerText=openAmount;let t=getCasePrice(currentPreviewCase)*openAmount;let n=`–û—Ç–∫—Ä—ã—Ç—å ${openAmount} —à—Ç. –∑–∞ ${t.toLocaleString('ru-RU')} ‚ÇΩ`;if(currentPreviewCase.requiredKey){const e=allItems[currentPreviewCase.requiredKey];n+=`<br><span style="font-size: 11px;">–¢—Ä–µ–±—É–µ—Ç—Å—è: ${e.name} (${openAmount} —à—Ç.)</span>`;}document.getElementById('viewCaseBtn').innerHTML=n;}function setCaseAmount(e){openAmount=e;changeCaseAmount(0);}function openCasePreview(e){currentPreviewCase=casesData.find(t=>t.id===e);document.getElementById('viewCaseImg').src=currentPreviewCase.image||'';openAmount=1;document.getElementById('caseAmount').innerText=openAmount;document.getElementById('amountSelector').style.display=(e==='agent_case')?'none':'flex';changeCaseAmount(0);const t=document.getElementById('viewCaseDrops');t.innerHTML='';const n={'#ffea00':0,'#eb4b4b':1,'#54a0ff':2,'#b0c3d9':3};const a=currentPreviewCase.drops.map(e=>allItems[e]).filter(e=>e!==undefined);a.sort((e,t)=>{let a=n[e.color]??9;let o=n[t.color]??9;if(a!==o)return a-o;return(t.price||0)-(e.price||0);});a.forEach(e=>{let n='';if(e.isSecret)n=`<div style="font-size: 36px; margin: 10px 0; color: ${e.color};">‚ùì</div><div style="font-size: 11px; font-weight: bold; color: ${e.color}; margin-top:5px;">–°–µ–∫—Ä–µ—Ç–Ω—ã–π –¥—Ä–æ–ø</div>`;else if(e.type==='money')n=`<div style="font-size: 14px; font-weight: 800; margin: 18px 0; color: ${e.color};">${e.price.toLocaleString('ru-RU')} ‚ÇΩ</div>`;else if(e.type==='agent'){const t=e.image?`<img src="${e.image}">`:`<div style="font-size:30px;">${e.icon}</div>`;n=`${t}<div style="font-size: 9px; font-weight: bold; color: #fff; margin-top:5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%;">${e.name}</div><div style="font-size: 8px; color: ${e.color}; margin-top:2px;">–ë–∞—Ñ—Ñ –ê–≥–µ–Ω—Ç–∞</div>`;}else{const t=e.image?`<img src="${e.image}">`:`<div style="font-size:30px;">${e.icon}</div>`;n=`${t}<div style="font-size: 9px; font-weight: bold; color: #fff; margin-top:5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%;">${e.name}</div><div style="font-size: 9px; color: #8b8b99; margin-top:2px;">${e.price.toLocaleString('ru-RU')} ‚ÇΩ</div>`;}t.innerHTML+=`<div class="drop-item-card" style="border-top: 3px solid ${e.color};">${n}</div>`;});switchPage('case-view',document.querySelectorAll('.nav-btn')[0]);}function confirmOpenCase(){let e=getCasePrice(currentPreviewCase)*openAmount;if(balance<e){alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ!');return;}if(currentPreviewCase.id==='agent_case'&&getAnyAgent()){alert('–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∞–≥–µ–Ω—Ç! –£–≤–æ–ª—å—Ç–µ –µ–≥–æ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ, —á—Ç–æ–±—ã –Ω–∞–Ω—è—Ç—å –Ω–æ–≤–æ–≥–æ.');return;}if(currentPreviewCase.requiredKey){const e=allItems[currentPreviewCase.requiredKey];let t=inventory.filter(e=>e.id===currentPreviewCase.requiredKey);if(t.length<openAmount){alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª—é—á–µ–π! –í–∞–º –Ω—É–∂–Ω–æ ${openAmount} —à—Ç. ${e.name}.`);return;}if(!confirm(`–û—Ç–∫—Ä—ã—Ç—å ${openAmount} –∫–µ–π—Å–æ–≤ –∑–∞ ${finalPrice.toLocaleString('ru-RU')} ‚ÇΩ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ${openAmount} –∫–ª—é—á–µ–π?`))return;}isOpening=true;isStandardCase=true;isBonusMode=false;balance-=e;if(currentPreviewCase.requiredKey){let e=0;inventory=inventory.filter(t=>{if(t.id===currentPreviewCase.requiredKey&&e<openAmount){e++;return false;}return true;});saveInventory();}stats.opened+=openAmount;updateBalanceUI();document.getElementById('statOpened').innerText=stats.opened;saveStats();document.querySelectorAll('.page').forEach(e=>e.classList.remove('active'));document.getElementById('page-roulette').classList.add('active');const t=currentPreviewCase.drops.map(e=>allItems[e]).filter(e=>e!==undefined);if(openAmount===1){document.getElementById('roulette').style.display='block';document.getElementById('openingCaseName').innerText=`–û—Ç–∫—Ä—ã–≤–∞–µ–º ${currentPreviewCase.name}...`;initRoulette(t);lastWonItem=JSON.parse(JSON.stringify(getWeightedRandomItem(t,hasAgent('agent_zixxto'))));if(!lastWonItem.price)lastWonItem.price=0;db.save('pending_claim',JSON.stringify(lastWonItem));runRouletteAnimation(lastWonItem,()=>{if(lastWonItem.isSecret)showResultModal('–î–ñ–ï–ö–ü–û–¢!');else showResultModal('–í–∞—à –≤—ã–∏–≥—Ä—ã—à!');});}else{document.getElementById('roulette').style.display='none';document.getElementById('openingCaseName').innerHTML=`–û—Ç–∫—Ä—ã–≤–∞–µ–º ${openAmount}x ${currentPreviewCase.name}...<br><br><span style="font-size: 16px; color: #8b8b99;">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ ‚öôÔ∏è</span>`;multiWonItems=[];for(let e=0;e<openAmount;e++){let e=JSON.parse(JSON.stringify(getWeightedRandomItem(t,hasAgent('agent_zixxto'))));if(!e.price)e.price=0;multiWonItems.push(e);}db.save('pending_claim_multi',JSON.stringify(multiWonItems));setTimeout(()=>{document.getElementById('openingCaseName').innerText="–û—Ç–∫—Ä—ã–≤–∞–µ–º...";showMultiResultModal(openAmount);},1200);}}function initRoulette(e){const t=document.getElementById('rouletteItems');t.innerHTML='';for(let n=0;n<70;n++){let a=e[Math.floor(Math.random()*e.length)];if(!a)continue;if(isStandardCase&&Math.random()<0.15&&currentPreviewCase.id!=='agent_case'){let e=genericSecretItem;if(currentPreviewCase){let t=currentPreviewCase.drops.map(e=>allItems[e]).filter(e=>e&&e.isSecret);if(t.length>0)e=t[0];}a=e;}const o=document.createElement('div');o.className='item';o.style.borderBottom=`4px solid ${a.color||'#fff'}`;o.style.background=`linear-gradient(to top, ${a.color||'#fff'}22, transparent)`;if(a.type==='promo'||a.type==='nothing')o.innerHTML=`<div style="font-size: 40px;">${a.icon}</div><div class="item-text" style="color:${a.color}">${a.name}</div>`;else if(a.type==='money')o.innerHTML=`<div style="font-size: 16px; font-weight: 800; color:${a.color}">${(a.price||0).toLocaleString('ru-RU')} ‚ÇΩ</div>`;else o.innerHTML=`<div style="display:flex; justify-content:center; align-items:center; width:100%; height:100%;">${renderItemIcon(a,true)}</div>`;t.appendChild(o);}}function runRouletteAnimation(e,t){if(!e){t();return;}const n=60;const a=document.getElementById('rouletteItems');const o=a.children[n];if(o){o.style.borderBottom=`4px solid ${e.color}`;o.style.background=`linear-gradient(to top, ${e.color}66, transparent)`;if(e.type==='promo'||e.type==='nothing')o.innerHTML=`<div style="font-size: 40px;">${e.icon}</div><div class="item-text" style="color:${e.color}">${e.name}</div>`;else if(e.type==='money')o.innerHTML=`<div style="font-size: 16px; font-weight: 800; color:${e.color}">${(e.price||0).toLocaleString('ru-RU')} ‚ÇΩ</div>`;else o.innerHTML=`<div style="filter: drop-shadow(0 0 15px ${e.color}); display:flex; justify-content:center; align-items:center; width:100%; height:100%;">${renderItemIcon(e,true)}</div>`;}if(isStandardCase&&Math.random()<0.15&&currentPreviewCase.id!=='agent_case'){const e=[-2,-1,1,2];const t=n+e[Math.floor(Math.random()*e.length)];if(a.children[t]){let e=genericSecretItem;if(currentPreviewCase){let t=currentPreviewCase.drops.map(e=>allItems[e]).filter(e=>e&&e.isSecret);if(t.length>0)e=t[0];}const n=a.children[t];n.innerHTML=`<div style="display:flex; justify-content:center; align-items:center; width:100%; height:100%; filter: drop-shadow(0 0 15px ${e.color});">${renderItemIcon(e,true)}</div>`;n.style.borderBottom=`4px solid ${e.color}`;n.style.background=`linear-gradient(to top, ${e.color}44, transparent)`;}}const s=140;const r=document.getElementById('roulette').offsetWidth;const l=n*s-r/2+s/2+(Math.floor(Math.random()*80)-40);a.style.transition='none';a.style.transform='translateX(0)';void a.offsetWidth;a.style.transition='transform 5s cubic-bezier(0.1, 0.9, 0.1, 1)';a.style.transform=`translateX(-${l}px)`;setTimeout(()=>{if(o){o.style.transition='transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)';o.style.transform='scale(1.15)';o.style.zIndex='10';}},5000);setTimeout(t,5700);}function showResultModal(e){if(!lastWonItem)return;document.getElementById('resultTitle').innerText=e;document.getElementById('resultItemIcon').innerHTML=renderItemIcon(lastWonItem);document.getElementById('resultItemName').innerText=lastWonItem.name;document.getElementById('resultItemName').style.color=lastWonItem.color;document.getElementById('resultItemIcon').style.filter=`drop-shadow(0 0 40px ${lastWonItem.color})`;const t=document.getElementById('resultItemInfoBlock');const n=document.getElementById('resultActionsItems');const a=document.getElementById('resultActionsPromo');const o=document.getElementById('resultActionsMoney');let s=lastWonItem.price||0;if(lastWonItem.type==='promo'){t.innerHTML=`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ <b>+5%</b> –∫ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é!`;n.style.display='none';o.style.display='none';a.style.display='flex';a.innerHTML=`<button class="btn btn-success" onclick="claimLuckyPromo()">–ó–∞–±—Ä–∞—Ç—å –≤ –±–æ—Ç–µ</button>`;}else if(lastWonItem.type==='nothing'||lastWonItem.type==='fail'){t.innerHTML=lastWonItem.type==='fail'?`–ü—Ä–µ–¥–º–µ—Ç —Å–≥–æ—Ä–µ–ª.`:`–ü—Ä–∏—Ö–æ–¥–∏—Ç–µ –∑–∞–≤—Ç—Ä–∞!`;n.style.display='none';o.style.display='none';a.style.display='flex';a.innerHTML=`<button class="btn btn-outline" onclick="finishOpening()">–ó–∞–∫—Ä—ã—Ç—å</button>`;}else if(lastWonItem.type==='money'){t.innerHTML=`–ó–∞—á–∏—Å–ª–µ–Ω–æ: <span style="color: #00b894; font-weight: bold;">${s.toLocaleString('ru-RU')} ‚ÇΩ</span>`;n.style.display='none';a.style.display='none';o.style.display='flex';}else if(lastWonItem.type==='agent'){t.innerHTML=`<span style="color: #00b894; font-weight: bold;">–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –±–∞—Ñ—Ñ—ã:</span><br><span style="font-size:12px; line-height: 1.5;">${lastWonItem.buffs.replace(/\n/g,'<br>')}</span>`;n.style.display='none';o.style.display='none';a.style.display='flex';a.innerHTML=`<button class="btn btn-success" onclick="keepItem()">üíº –ù–∞–Ω—è—Ç—å –∞–≥–µ–Ω—Ç–∞</button>`;}else{if(hasAgent('agent_perfecto'))s=Math.floor(s*1.10);let e=hasAgent('agent_perfecto')?`<br><span style="color:#00b894; font-size:11px;">(–°—Ä–∞–±–æ—Ç–∞–ª –±–∞—Ñ—Ñ –ü—Ä–æ–¥–∞–≤–µ—Ü +10%)</span>`:'';t.innerHTML=`–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: <span style="color: #fdcb6e; font-weight: bold;">${s.toLocaleString('ru-RU')} ‚ÇΩ</span>${e}`;document.getElementById('sellModalPrice').innerText=s.toLocaleString('ru-RU');n.style.display='flex';a.style.display='none';o.style.display='none';}openModal('resultModal');}function showMultiResultModal(e){let t=0;multiWonItems.forEach(e=>{if(e.type==='money')t+=e.price;else{let n=e.price;if(hasAgent('agent_perfecto'))n=Math.floor(n*1.10);t+=n;}});document.getElementById('multiCaseCount').innerText=e;document.getElementById('multiTotalValue').innerText=t.toLocaleString('ru-RU')+' ‚ÇΩ';const n=document.getElementById('multiResultGrid');n.innerHTML='';multiWonItems.forEach((e)=>{let t=`<div style="color: ${e.color}; font-size: 10px; font-weight: bold; margin-top: 5px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${e.name}</div>`;if(e.type==='money')t=`<div style="color: ${e.color}; font-size: 11px; font-weight: bold; margin-top: 5px;">${e.price.toLocaleString('ru-RU')} ‚ÇΩ</div>`;n.innerHTML+=`<div style="background: #1f1f25; border-radius: 12px; padding: 10px 5px; text-align: center; border: 1px solid rgba(255,255,255,0.05); border-top: 3px solid ${e.color}; display:flex; flex-direction:column; justify-content:center;"><div style="height: 45px; display: flex; justify-content: center; align-items: center; font-size: 24px;">${renderItemIcon(e)}</div>${t}</div>`;});openModal('multiResultModal');}function keepMultiItems(){let e=0;let t=0;multiWonItems.forEach(n=>{if(n.type==='money')e+=n.price;else if(n.type!=='promo'){inventory.push({...n,invId:String(Date.now()+Math.random())});t++;}});balance+=e;if(e>0)tg.showAlert(`–ü—Ä–µ–¥–º–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å!\n–ó–∞—á–∏—Å–ª–µ–Ω–æ –Ω–∞ –±–∞–ª–∞–Ω—Å: ${e.toLocaleString('ru-RU')} ‚ÇΩ`);updateBalanceUI();saveInventory();db.save('pending_claim_multi','null');finishOpening();}function sellMultiItems(){let e=0;multiWonItems.forEach(t=>{if(t.type==='money')e+=t.price;else if(t.type!=='promo'){let n=t.price;if(hasAgent('agent_perfecto'))n=Math.floor(n*1.10);e+=n;}});balance+=e;tg.showAlert(`–í—ã –ø—Ä–æ–¥–∞–ª–∏ –≤—Å—ë –∏ –ø–æ–ª—É—á–∏–ª–∏ ${e.toLocaleString('ru-RU')} ‚ÇΩ.`);updateBalanceUI();db.save('pending_claim_multi','null');finishOpening();}function claimLuckyPromo(){tg.openTelegramLink('https://t.me/StockOGCasesBot?start=lucky');finishOpening();}function keepItem(){if(!lastWonItem)return;let e=lastWonItem;lastWonItem=null;inventory.push({...e,invId:String(Date.now()+Math.random())});saveInventory();db.save('pending_claim','null');updateAgentStatus();finishOpening();}function sellFromModal(){if(!lastWonItem)return;let e=lastWonItem.price||0;if(hasAgent('agent_perfecto')&&lastWonItem.type!=='money'&&lastWonItem.type!=='agent'&&lastWonItem.type!=='promo')e=Math.floor(e*1.10);lastWonItem=null;balance+=e;updateBalanceUI();db.save('pending_claim','null');finishOpening();}function takeMoney(){if(!lastWonItem)return;const e=lastWonItem.price||0;lastWonItem=null;balance+=e;updateBalanceUI();db.save('pending_claim','null');finishOpening();}function finishOpening(){db.save('pending_claim','null');db.save('pending_claim_multi','null');closeModal('resultModal');closeModal('multiResultModal');document.getElementById('page-roulette').classList.remove('active');if(isBonusMode){document.getElementById('page-bonus').classList.add('active');updateBonusButton();}else if(craftSelectedIds.length>0||upgMyItem){document.getElementById('page-games').classList.add('active');resetCrafting();upgMyItem=null;updateUpgUI();}else if(isStandardCase){document.getElementById('page-case-view').classList.add('active');}else{document.getElementById('page-cases').classList.add('active');}isOpening=false;isBonusMode=false;isStandardCase=false;}function renderInventory(){const e=document.getElementById('inventoryGrid');document.getElementById('invCount').innerText=inventory.length;e.innerHTML='';if(inventory.length===0){e.innerHTML='<div style="grid-column: 1 / -1; text-align: center; color: #8b8b99; padding: 40px 0;">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>';return;}const t=[...inventory].sort((e,t)=>{if(e.type==='agent'&&t.type!=='agent')return-1;if(e.type!=='agent'&&t.type==='agent')return 1;return(t.price||0)-(e.price||0);});t.forEach(t=>{const n=t.price||0;if(t.type==='agent'){e.innerHTML+=`<div class="inv-item" style="border-top: 3px solid ${t.color}; background: rgba(108,92,231,0.1);"><div class="inv-item-img">${renderItemIcon(t)}</div><div class="inv-item-name" style="color: ${t.color}">${t.name}</div><div class="inv-item-price" style="white-space:normal; line-height:1.2;">–ë–∞—Ñ—Ñ –∞–∫—Ç–∏–≤–µ–Ω</div><div style="display: flex; gap: 5px; width: 100%; margin-top: 10px;"><button class="btn btn-outline" style="flex: 1; padding: 6px; font-size: 11px; border-color: #ff4757; color: #ff4757;" onclick="fireAgent('${t.invId}', '${t.name}')">–£–≤–æ–ª–∏—Ç—å</button></div></div>`;}else{e.innerHTML+=`<div class="inv-item" style="border-top: 3px solid ${t.color};"><div class="inv-item-img">${renderItemIcon(t)}</div><div class="inv-item-name" style="color: ${t.color}">${t.name}</div><div class="inv-item-price">–°—Ç–æ–∏–º–æ—Å—Ç—å: ${n.toLocaleString('ru-RU')} ‚ÇΩ</div><div style="display: flex; gap: 5px; width: 100%; margin-top: 10px;"><button class="btn btn-outline" style="flex: 1; padding: 6px; font-size: 11px; border-color: rgba(255,255,255,0.1); color: #fff;" onclick="sellSingleItem('${t.invId}', ${n})">–ü—Ä–æ–¥–∞—Ç—å</button><button class="btn btn-success" style="flex: 1; padding: 6px; font-size: 11px;" onclick="openWithdrawModal('${t.invId}')">–í—ã–≤–æ–¥</button></div></div>`;}});}function sellSingleItem(e,t){let n=t;if(hasAgent('agent_perfecto'))n=Math.floor(n*1.10);inventory=inventory.filter(t=>String(t.invId)!==String(e));balance+=n;updateBalanceUI();saveInventory();renderInventory();}function openWithdrawModal(e){if(!linkedRobloxAcc){alert('–°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–≤—è–∂–∏—Ç–µ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Roblox –≤ —Ä–∞–∑–¥–µ–ª–µ –ü—Ä–æ—Ñ–∏–ª—å!');return;}const t=inventory.find(t=>String(t.invId)!==String(e));if(!t||(t.price||0)<150000){alert("–í—ã–≤–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –æ—Ç 150 000 ‚ÇΩ!");return;}currentWithdrawItemId=e;document.getElementById('wdItemName').innerText=t.name;document.getElementById('wdTargetAcc').innerText=linkedRobloxAcc;openModal('withdrawModal');}function confirmWithdraw(){const e=document.getElementById('wdSubmitBtn');e.innerText='–û—Ç–ø—Ä–∞–≤–∫–∞...';e.disabled=true;setTimeout(()=>{const t=inventory.find(e=>String(e.invId)===String(currentWithdrawItemId));if(!t)return;inventory=inventory.filter(e=>String(e.invId)!==String(currentWithdrawItemId));saveInventory();renderInventory();closeModal('withdrawModal');const n=`${t.id}||${t.price||0}||${linkedRobloxAcc}`;const a=btoa(unescape(encodeURIComponent(n))).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');tg.openTelegramLink(`https://t.me/StockOGCasesBot?start=wd_${a}`);e.innerText='–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–≤–æ–¥';e.disabled=false;},300);}function applyPromo(e){const t=document.getElementById('promoInput').value.trim();if(!t){alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥!");return;}e.disabled=true;e.innerText='...';tg.openTelegramLink(`https://t.me/StockOGCasesBot?start=promo_${t}`);setTimeout(()=>{document.getElementById('promoInput').value='';e.disabled=false;e.innerText='–û–ö';},2000);}function copyRefLink(){navigator.clipboard.writeText(document.getElementById('refLink').innerText).then(()=>{alert('–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');});}function renderCraftInventory(){const e=document.getElementById('craftInventoryGrid');e.innerHTML='';const t=inventory.filter(e=>!e.isSecret&&e.type!=='money'&&e.type!=='key'&&e.type!=='agent');if(t.length<3){e.innerHTML='<div style="grid-column: 1 / -1; text-align: center; color: #8b8b99; padding: 20px 0;">–î–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 3 –æ–±—ã—á–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–∞</div>';return;}t.forEach(t=>{const n=craftSelectedIds.includes(String(t.invId));e.innerHTML+=`<div class="inv-item ${n?'selected':''}" style="border-top: 3px solid ${t.color};" onclick="toggleCraftItem('${t.invId}')"><div class="inv-item-img">${renderItemIcon(t)}</div><div class="inv-item-name">${t.name}</div></div>`;});updateCraftSlots();}function toggleCraftItem(e){if(craftSelectedIds.includes(String(e)))craftSelectedIds=craftSelectedIds.filter(t=>t!==String(e));else if(craftSelectedIds.length<3)craftSelectedIds.push(String(e));renderCraftInventory();}function updateCraftSlots(){for(let e=0;e<3;e++){const t=document.getElementById(`slot-${e}`);if(craftSelectedIds[e]){const n=inventory.find(t=>String(t.invId)===String(craftSelectedIds[e]));t.innerHTML=renderItemIcon(n);t.classList.add('filled');}else{t.innerHTML='';t.classList.remove('filled');}}const e=document.getElementById('btnCraft');if(craftSelectedIds.length===3){e.style.opacity='1';e.style.cursor='pointer';}else{e.style.opacity='0.5';e.style.cursor='not-allowed';}}function executeCraft(){if(craftSelectedIds.length<3||isOpening)return;isOpening=true;isStandardCase=false;stats.crafts+=1;document.getElementById('statCrafts').innerText=stats.crafts;saveStats();inventory=inventory.filter(e=>!craftSelectedIds.includes(String(e.invId)));saveInventory();document.getElementById('page-games').classList.remove('active');document.getElementById('page-roulette').classList.add('active');document.getElementById('openingCaseName').innerText="–ö–æ–Ω—Ç—Ä–∞–∫—Ç...";let e=Object.values(allItems).filter(e=>!e.isSecret&&e.type==='item'&&e.type!=='agent');if(hasAgent('agent_vovan')||hasAgent('agent_perfecto')){e=e.map(e=>{let t=e.weight||1;if((e.price||0)>80000)t*=3;return{...e,weight:t};});}initRoulette(e);const t=getWeightedRandomItem(e);lastWonItem=JSON.parse(JSON.stringify(t));if(!lastWonItem.price)lastWonItem.price=0;db.save('pending_claim',JSON.stringify(lastWonItem));runRouletteAnimation(lastWonItem,()=>{showResultModal('–ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω!');craftSelectedIds=[];});}function resetCrafting(){craftSelectedIds=[];if(document.getElementById('tab-contract').classList.contains('active'))renderCraftInventory();}function openUpgMyModal(){const e=document.getElementById('upgMyGrid');e.innerHTML='';const t=inventory.filter(e=>!e.isSecret&&e.type!=='money'&&e.type!=='key'&&e.type!=='agent');if(t.length===0){e.innerHTML='<div style="grid-column: 1 / -1; text-align: center; color: #8b8b99;">–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤</div>';}else{t.forEach(t=>{const n=t.price||0;e.innerHTML+=`<div class="inv-item" style="border-top: 3px solid ${t.color};" onclick="selectUpgMy('${t.invId}')"><div class="inv-item-img">${renderItemIcon(t)}</div><div class="inv-item-name">${t.name}</div><div class="inv-item-price">${n.toLocaleString('ru-RU')} ‚ÇΩ</div></div>`;});}openModal('upgMyModal');}function selectUpgMy(e){upgMyItem=inventory.find(t=>String(t.invId)===String(e));closeModal('upgMyModal');updateUpgUI();}function openUpgTargetModal(){const e=document.getElementById('upgTargetGrid');e.innerHTML='';const t=Object.values(allItems).filter(e=>e.type==='item'&&!e.isSecret&&(e.price||0)>10000&&e.type!=='agent');t.sort((e,t)=>(e.price||0)-(t.price||0)).forEach(t=>{let n=t.price||0;e.innerHTML+=`<div class="inv-item" style="border-top: 3px solid ${t.color};" onclick="selectUpgTarget('${t.id}')"><div class="inv-item-img">${renderItemIcon(t)}</div><div class="inv-item-name">${t.name}</div><div class="inv-item-price">${n.toLocaleString('ru-RU')} ‚ÇΩ</div></div>`;});openModal('upgTargetModal');}function selectUpgTarget(e){upgTargetItem=allItems[e];closeModal('upgTargetModal');updateUpgUI();}function updateUpgUI(){const e=document.getElementById('upg-my-slot');if(upgMyItem){e.innerHTML=renderItemIcon(upgMyItem);e.classList.add('filled');}else{e.innerHTML='<span style="font-size:12px; color:#8b8b99;">–í–∞—à<br>–ø—Ä–µ–¥–º–µ—Ç</span>';e.classList.remove('filled');}const t=document.getElementById('upg-target-slot');if(upgTargetItem){t.innerHTML=renderItemIcon(upgTargetItem);t.classList.add('filled');}else{t.innerHTML='<span style="font-size:12px; color:#8b8b99;">–ñ–µ–ª–∞–µ–º—ã–π<br>–ø—Ä–µ–¥–º–µ—Ç</span>';t.classList.remove('filled');}let n=0;if(upgMyItem&&upgTargetItem){let e=upgTargetItem.price||1;let t=upgMyItem.price||0;let a=0;if(hasAgent('agent_vovan'))a=6;else if(hasAgent('agent_cheba')||hasAgent('agent_funky')||hasAgent('agent_pechen'))a=5;n=Math.min((t/e)*100*0.9+a,95);}document.getElementById('upg-chance').innerText=`–®–∞–Ω—Å: ${n.toFixed(1)}%`;const a=document.getElementById('btnUpgrade');if(upgMyItem&&upgTargetItem){a.style.opacity='1';a.style.cursor='pointer';}else{a.style.opacity='0.5';a.style.cursor='not-allowed';}}function executeUpgrade(){if(!upgMyItem||!upgTargetItem||isOpening)return;isOpening=true;isStandardCase=false;let e=upgTargetItem.price||1;let t=upgMyItem.price||0;let n=0;if(hasAgent('agent_vovan'))n=6;else if(hasAgent('agent_cheba')||hasAgent('agent_funky')||hasAgent('agent_pechen'))n=5;let a=Math.min((t/e)*100*0.9+n,95);let o=Math.random()*100;let s=o<=a;inventory=inventory.filter(e=>String(e.invId)!==String(upgMyItem.invId));saveInventory();document.getElementById('page-games').classList.remove('active');document.getElementById('page-roulette').classList.add('active');document.getElementById('openingCaseName').innerText="–ê–ø–≥—Ä–µ–π–¥...";const r=document.getElementById('rouletteItems');r.innerHTML='';for(let e=0;e<70;e++){let e=Math.random()<0.5?upgTargetItem:{icon:'‚ùå',color:'#8b8b99'};const t=document.createElement('div');t.className='item';t.style.borderBottom=`4px solid ${e.color}`;t.innerHTML=`<div>${renderItemIcon(e)}</div>`;r.appendChild(t);}if(s){lastWonItem=JSON.parse(JSON.stringify(upgTargetItem));}else{lastWonItem={id:'fail',icon:'‚ùå',name:'–ü–†–û–í–ê–õ',color:'#8b8b99',price:0,type:'fail'};}if(!lastWonItem.price)lastWonItem.price=0;db.save('pending_claim',JSON.stringify(lastWonItem));runRouletteAnimation(lastWonItem,()=>{if(s){showResultModal('–ê–ø–≥—Ä–µ–π–¥ —É—Å–ø–µ—à–µ–Ω!');}else{showResultModal('–ü—Ä–æ–≤–∞–ª...');}upgMyItem=null;upgTargetItem=null;});}</script></body></html>
